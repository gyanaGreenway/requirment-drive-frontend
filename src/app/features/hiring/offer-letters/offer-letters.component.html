<section class="offers">
  <header class="offers__header">
    <div>
      <h1>Offer Letters</h1>
      <p>Keep a pulse on offers in flight, approvals pending, and conversion confidence.</p>
    </div>
    <div class="offers__actions">
      <button type="button" class="btn btn-ghost">Download summary</button>
      <button type="button" class="btn btn-primary">
        <span aria-hidden="true">＋</span>
        Create offer letter
      </button>
    </div>
  </header>

  <div class="offers__filters">
    <button
      type="button"
      class="chip"
      *ngFor="let filter of filters"
      [class.chip--active]="selectedFilter === filter.id"
      (click)="setFilter(filter.id)"
    >
      {{ filter.label }}
    </button>
  </div>

  <div class="offers__state" *ngIf="loading">
    Loading offer activity…
  </div>
  <div class="alert alert-danger" role="alert" *ngIf="!loading && error">
    {{ error }}
  </div>

  <section class="offers__summary">
    <article class="summary-card">
      <p class="summary-card__label">Active offers</p>
      <h3>{{ totalOffers }}</h3>
      <span class="summary-card__hint">{{ daysSinceLastSend }} days since last send</span>
    </article>
    <article class="summary-card">
      <p class="summary-card__label">Accepted</p>
      <h3>{{ acceptedCount }}</h3>
      <span class="summary-card__hint">Welcome kits in progress</span>
    </article>
    <article class="summary-card">
      <p class="summary-card__label">Awaiting signature</p>
      <h3>{{ pendingCount }}</h3>
      <span class="summary-card__hint">Negotiations running: {{ negotiationCount }}</span>
    </article>
    <article class="summary-card">
      <p class="summary-card__label">Pipeline value</p>
      <h3>{{ activePipelineValue }}</h3>
      <span class="summary-card__hint">Drafts queued: {{ draftCount }} · Confidence {{ averageAcceptanceConfidence }}%</span>
    </article>
  </section>

  <section class="offers__list" *ngIf="filteredOffers.length; else emptyState">
    <article class="offer-card" *ngFor="let offer of filteredOffers; trackBy: trackByOfferId">
      <header class="offer-card__header">
        <div>
          <h2>{{ offer.candidateName }}</h2>
          <p>{{ offer.role }} · {{ offer.location }}</p>
        </div>
        <span [ngClass]="getTimelineBadge(offer.status)">{{ offer.status }}</span>
      </header>

      <div class="offer-card__meta">
        <span>Offer ID: {{ offer.id }}</span>
        <span>Sent {{ offer.sentOn | date: 'EEE, MMM d' }}</span>
        <span>Start {{ offer.targetStart | date: 'EEE, MMM d' }}</span>
        <span>Recruiter: {{ offer.recruiter }}</span>
        <span>Last touch {{ offer.lastTouched | date: 'MMM d, HH:mm' }}</span>
      </div>

      <div class="offer-card__body">
        <div class="offer-card__details">
          <h3>Compensation</h3>
          <p>{{ offer.compensation }}</p>
          <p class="offer-card__notes">{{ offer.notes }}</p>
        </div>
        <div class="offer-card__confidence">
          <div class="confidence-meter">
            <span>Acceptance confidence</span>
            <div class="confidence-meter__bar">
              <span class="confidence-meter__fill" [style.width]="getProbabilityWidth(offer.acceptanceProbability)"></span>
            </div>
            <strong>{{ getAcceptancePercent(offer.acceptanceProbability) }}%</strong>
          </div>
          <div class="confidence-meta">
            <span>Attachments {{ offer.attachments }}</span>
            <a
              *ngIf="offer.offerLink"
              [href]="offer.offerLink"
              target="_blank"
              rel="noopener"
              class="btn-link"
            >
              View offer packet
            </a>
          </div>
        </div>
      </div>

      <footer class="offer-card__footer">
        <div class="footer-actions">
          <button type="button" class="btn btn-light">Log candidate touchpoint</button>
          <button type="button" class="btn btn-outline">Prepare onboarding brief</button>
        </div>
        <button type="button" class="btn-link">Move to next action →</button>
      </footer>
    </article>
  </section>

  <ng-template #emptyState>
    <section class="offers__empty">
      <h3>No offers under this view</h3>
      <p>Switch filters or create a new offer letter to populate the pipeline.</p>
    </section>
  </ng-template>

  <section class="offers__roadmap">
    <h2>What’s coming next</h2>
    <ul>
      <li>One-click finance approvals with configurable thresholds.</li>
      <li>Candidate counter-offer tracking with auto reminders.</li>
      <li>Onboarding readiness checklist triggered on acceptance.</li>
    </ul>
  </section>
</section>
